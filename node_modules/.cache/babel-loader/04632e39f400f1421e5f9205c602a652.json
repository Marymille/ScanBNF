{"remainingRequest":"C:\\Users\\CAMILLE\\Downloads\\Tetard_App_ISBN\\BNF-Scan\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\CAMILLE\\Downloads\\Tetard_App_ISBN\\BNF-Scan\\src\\classes\\recuperationDonnees.js","dependencies":[{"path":"C:\\Users\\CAMILLE\\Downloads\\Tetard_App_ISBN\\BNF-Scan\\src\\classes\\recuperationDonnees.js","mtime":1576506438462},{"path":"C:\\Users\\CAMILLE\\Downloads\\Tetard_App_ISBN\\BNF-Scan\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\CAMILLE\\Downloads\\Tetard_App_ISBN\\BNF-Scan\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJDOlxcVXNlcnNcXENBTUlMTEVcXERvd25sb2Fkc1xcVGV0YXJkX0FwcF9JU0JOXFxCTkYtU2Nhblxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUtY29yZWpzMy9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiQzpcXFVzZXJzXFxDQU1JTExFXFxEb3dubG9hZHNcXFRldGFyZF9BcHBfSVNCTlxcQk5GLVNjYW5cXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lLWNvcmVqczMvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgU3BhcnFsIGZyb20gIi4vc3BhcnFsLmpzIjsKaW1wb3J0IElzYm4gZnJvbSAiLi9Jc2JuLmpzIjsKCnZhciByZWN1cGVyYXRpb25Eb25uZWVzID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gcmVjdXBlcmF0aW9uRG9ubmVlcyhyZXN1bHRhdHMpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCByZWN1cGVyYXRpb25Eb25uZWVzKTsKCiAgICB0aGlzLnJlc3VsdGF0cyA9IHJlc3VsdGF0czsKICAgIHRoaXMuaXNibiA9IG5ldyBJc2JuKHJlc3VsdGF0cy5lYW4pOwogICAgdGhpcy5yZXF1ZXRlX2Rvbm5lZXNfZGVfYmFzZSh0aGlzLmlzYm4pOwogICAgdGhpcy5yZXF1ZXRlX2Rvbm5lZXNfYXV0ZXVyKHRoaXMuaXNibik7CiAgICB0aGlzLnJlcXVldGVfZG9ubmVzX2NvbXBsZW1lbnRhaXJlcyh0aGlzLmlzYm4pOwogICAgdGhpcy5maWxsSVNCTjEwKHRoaXMuaXNibik7CiAgfQoKICBfY3JlYXRlQ2xhc3MocmVjdXBlcmF0aW9uRG9ubmVlcywgW3sKICAgIGtleTogInJlcXVldGVfZG9ubmVlc19kZV9iYXNlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZXF1ZXRlX2Rvbm5lZXNfZGVfYmFzZShpc2JuKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB7CiAgICAgICAgY29uc29sZS5sb2coaXNibi5nZXRGb3JtYXRlZElTQk4oKSk7CiAgICAgICAgY29uc29sZS5sb2coaXNibi5nZXRGb3JtYXRlZElTQk4xMCgpKTsKICAgICAgICB2YXIgc3BhcnFsID0gbmV3IFNwYXJxbCgnaHR0cHM6Ly9kYXRhLmJuZi5mci9zcGFycWwnKTsKICAgICAgICBzcGFycWwucXVlcnkoIlBSRUZJWCByZGY6IDxodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjPlxuICAgICAgICAgICAgUFJFRklYIGZyYnItcmRhOiA8aHR0cDovL3Jkdm9jYWIuaW5mby91cmkvc2NoZW1hL0ZSQlJlbnRpdGllc1JEQS8+XG4gICAgICAgICAgICBQUkVGSVggYm5mLW9udG86IDxodHRwOi8vZGF0YS5ibmYuZnIvb250b2xvZ3kvYm5mLW9udG8vPlxuICAgICAgICAgICAgUFJFRklYIGRjdGVybXM6IDxodHRwOi8vcHVybC5vcmcvZGMvdGVybXMvPlxuICAgICAgICAgICAgUFJFRklYIHJkYXJlbGF0aW9uc2hpcHM6IDxodHRwOi8vcmR2b2NhYi5pbmZvL1JEQVJlbGF0aW9uc2hpcHNXRU1JLz5cbiAgICAgICAgICAgIFBSRUZJWCBmb2FmOiA8aHR0cDovL3htbG5zLmNvbS9mb2FmLzAuMS8+XG4gICAgICAgICAgICBQUkVGSVggcmRhZ3JvdXAxZWxlbWVudHM6IDxodHRwOi8vcmR2b2NhYi5pbmZvL0VsZW1lbnRzLz5cbiAgICAgICAgICAgIFNlbGVjdCA/dGl0cmVfbWFuaWZlc3RhdGlvbiA/ZGF0ZV9tYW5pZmVzdGF0aW9uID9saWV1X3B1YmxpY2F0aW9uX21hbmlmZXN0YXRpb24gP2xhbmd1ZV9leHByZXNzaW9uID9kZXNjcmlwdGlvbl9tYW5pZmVzdGF0aW9uID9lZGl0ZXVyX21hbmlmZXN0YXRpb24gP25vbV9hdXRldXIgP3N1amV0X29ldXZyZSB3aGVyZSB7XG4gICAgICAgICAgICAgICAgP21hbmlmIGRjdGVybXM6dGl0bGUgP3RpdHJlX21hbmlmZXN0YXRpb247XG4gICAgICAgICAgICAgICAgICAgIGRjdGVybXM6ZGF0ZSA/ZGF0ZV9tYW5pZmVzdGF0aW9uO1xuICAgICAgICAgICAgICAgICAgICBkY3Rlcm1zOmRlc2NyaXB0aW9uID9kZXNjcmlwdGlvbl9tYW5pZmVzdGF0aW9uO1xuICAgICAgICAgICAgICAgICAgICBkY3Rlcm1zOnB1Ymxpc2hlciA/ZWRpdGV1cl9tYW5pZmVzdGF0aW9uO1xuICAgICAgICAgICAgICAgICAgICByZGFncm91cDFlbGVtZW50czpwbGFjZU9mUHVibGljYXRpb24gP2xpZXVfcHVibGljYXRpb25fbWFuaWZlc3RhdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgcmRhcmVsYXRpb25zaGlwczpleHByZXNzaW9uTWFuaWZlc3RlZCA/ZXhwcmVzc2lvbi5cbiAgICAgICAgICAgICAgICA/ZXhwcmVzc2lvbiA8aHR0cDovL2RhdGEuYm5mLmZyL3ZvY2FidWxhcnkvcm9sZXMvcjcwPiA/YXV0ZXVyLlxuICAgICAgICAgICAgICAgIG9wdGlvbmFse1xuICAgICAgICAgICAgICAgICAgICA/ZXhwcmVzc2lvbiBkY3Rlcm1zOmxhbmd1YWdlID9sYW5ndWVfZXhwcmVzc2lvbi5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgb3B0aW9uYWx7XG4gICAgICAgICAgICAgICAgICAgID9vZXV2cmUgcmRhcmVsYXRpb25zaGlwczpleHByZXNzaW9uT2ZXb3JrID9leHByZXNzaW9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgYm5mLW9udG86c3ViamVjdCA/c3VqZXRfb2V1dnJlLlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA/YXV0ZXVyIGZvYWY6bmFtZSA/bm9tX2F1dGV1ci5cbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgID9tYW5pZiBibmYtb250bzppc2JuIFwiIi5jb25jYXQoaXNibi5nZXRGb3JtYXRlZElTQk4oKSwgIlwiXG4gICAgICAgICAgICAgICAgfSBVTklPTiB7XG4gICAgICAgICAgICAgICAgICAgID9tYW5pZiBibmYtb250bzppc2JuIFwiIikuY29uY2F0KGlzYm4uZ2V0Rm9ybWF0ZWRJU0JOMTAoKSwgIlwiXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0iKSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgICBfdGhpcy5maWxsSW5mb3MocmVzdWx0LCBpc2JuKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogInJlcXVldGVfZG9ubmVlc19hdXRldXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlcXVldGVfZG9ubmVlc19hdXRldXIoaXNibikgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHsKICAgICAgICB2YXIgc3BhcnFsID0gbmV3IFNwYXJxbCgnaHR0cHM6Ly9kYXRhLmJuZi5mci9zcGFycWwnKTsKICAgICAgICBzcGFycWwucXVlcnkoIlBSRUZJWCBibmYtb250bzogPGh0dHA6Ly9kYXRhLmJuZi5mci9vbnRvbG9neS9ibmYtb250by8+XG4gICAgICAgICAgICBQUkVGSVggcmRhcmVsYXRpb25zaGlwczogPGh0dHA6Ly9yZHZvY2FiLmluZm8vUkRBUmVsYXRpb25zaGlwc1dFTUkvPlxuICAgICAgICAgICAgUFJFRklYIGZvYWY6IDxodHRwOi8veG1sbnMuY29tL2ZvYWYvMC4xLz5cbiAgICAgICAgICAgIFBSRUZJWCByZGFncm91cDJlbGVtZW50czogPGh0dHA6Ly9yZHZvY2FiLmluZm8vRWxlbWVudHNHcjIvPlxuICAgICAgICAgICAgUFJFRklYIGRjdGVybXM6IDxodHRwOi8vcHVybC5vcmcvZGMvdGVybXMvPlxuXHRcdFx0UFJFRklYIGJuZnJvbGVzOiA8aHR0cDovL2RhdGEuYm5mLmZyL3ZvY2FidWxhcnkvcm9sZXMvPlxuXG4gICAgICAgICAgICBzZWxlY3QgP25vbV9hdXRldXIgP3BheXNfYXV0ZXVyID9pbWFnZV9hdXRldXIgP2luZm9ybWF0aW9uc19hdXRldXIgP3BhZ2VfYXV0ZXVyID9kYXRlX25haXNzYW5jZV9hdXRldXIgP2xpZXVfbmFpc3NhbmNlX2F1dGV1ciA/ZGF0ZV9tb3J0X2F1dGV1ciA/bGlldV9tb3J0X2F1dGV1ciB3aGVyZXtcbiAgICAgICAgICAgICAgICA/bWFuaWZlc3RhdGlvbiByZGFyZWxhdGlvbnNoaXBzOmV4cHJlc3Npb25NYW5pZmVzdGVkID9leHByZXNzaW9uLlxuICAgICAgICAgICAgICAgID9leHByZXNzaW9uIGJuZnJvbGVzOnI3MCA/YXV0ZXVyLlxuICAgICAgICAgICAgICAgID9hdXRldXIgZm9hZjpuYW1lID9ub21fYXV0ZXVyLlxuICBcdFx0XHRcdG9wdGlvbmFse1xuICAgIFx0XHRcdFx0P2F1dGV1ciBmb2FmOnBhZ2UgP3BhZ2VfYXV0ZXVyLlxuICBcdFx0XHRcdH1cbiAgICAgICAgICAgICAgICBvcHRpb25hbHtcbiAgICAgICAgICAgICAgICAgICAgP2F1dGV1ciBibmYtb250bzpmaXJzdFllYXIgP2RhdGVfbmFpc3NhbmNlX2F1dGV1ci5cbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWx7XG4gICAgICAgICAgICAgICAgICAgICAgICA/YXV0ZXVyIGJuZi1vbnRvOmxhc3RZZWFyID9kYXRlX21vcnRfYXV0ZXVyLlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG9wdGlvbmFse1xuICAgICAgICAgICAgICAgICAgICA/YXV0ZXVyIHJkYWdyb3VwMmVsZW1lbnRzOnBsYWNlT2ZCaXJ0aCA/bGlldV9uYWlzc2FuY2VfYXV0ZXVyLlxuICAgICAgICAgICAgICAgICAgICBvcHRpb25hbHtcbiAgICAgICAgICAgICAgICAgICAgICAgID9hdXRldXIgcmRhZ3JvdXAyZWxlbWVudHM6cGxhY2VPZkRlYXRoID9saWV1X21vcnRfYXV0ZXVyLlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG9wdGlvbmFse1xuICAgICAgICAgICAgICAgICAgICA/YXV0ZXVyIHJkYWdyb3VwMmVsZW1lbnRzOmNvdW50cnlBc3NvY2lhdGVkV2l0aFRoZVBlcnNvbiA/cGF5c19hdXRldXIuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG9wdGlvbmFse1xuICAgICAgICAgICAgICAgICAgICA/YXV0ZXVyIGZvYWY6ZGVwaWN0aW9uID9pbWFnZV9hdXRldXIuXG4gICAgICAgICAgICAgICAgICAgIGZpbHRlcihyZWdleCg/aW1hZ2VfYXV0ZXVyLCBcImh0dHA6Ly9jb21tb25zLndpa2ltZWRpYS5vcmcvd2lraS9TcGVjaWFsOkZpbGVQYXRoL1wiKSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgb3B0aW9uYWx7XG4gICAgICAgICAgICAgICAgICAgID9hdXRldXIgcmRhZ3JvdXAyZWxlbWVudHM6YmlvZ3JhcGhpY2FsSW5mb3JtYXRpb24gP2luZm9ybWF0aW9uc19hdXRldXIuXG4gICAgICAgICAgICAgICAgfVxuICBcdFx0XHRcdCB7XG4gICAgICAgICAgICAgICAgICAgID9tYW5pZmVzdGF0aW9uIGJuZi1vbnRvOmlzYm4gXCIiLmNvbmNhdChpc2JuLmdldEZvcm1hdGVkSVNCTigpLCAiXCJcbiAgICAgICAgICAgICAgICB9IFVOSU9OIHtcbiAgICAgICAgICAgICAgICAgICAgP21hbmlmZXN0YXRpb24gYm5mLW9udG86aXNibiBcIiIpLmNvbmNhdChpc2JuLmdldEZvcm1hdGVkSVNCTjEwKCksICJcIlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxpbWl0IDEiKSkudGhlbihmdW5jdGlvbiAocmVzdWx0X2F1dGV1cikgewogICAgICAgICAgX3RoaXMyLmZpbGxJbmZvc0F1dGV1cihyZXN1bHRfYXV0ZXVyLCBpc2JuKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogInJlcXVldGVfZG9ubmVzX2NvbXBsZW1lbnRhaXJlcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVxdWV0ZV9kb25uZXNfY29tcGxlbWVudGFpcmVzKGlzYm4pIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB7CiAgICAgICAgdmFyIHNwYXJxbCA9IG5ldyBTcGFycWwoJ2h0dHBzOi8vZGF0YS5ibmYuZnIvc3BhcnFsJyk7CiAgICAgICAgc3BhcnFsLnF1ZXJ5KCJQUkVGSVggYm5mLW9udG86IDxodHRwOi8vZGF0YS5ibmYuZnIvb250b2xvZ3kvYm5mLW9udG8vPlxuICAgICAgICAgICAgUFJFRklYIHJkYXJlbGF0aW9uc2hpcHM6IDxodHRwOi8vcmR2b2NhYi5pbmZvL1JEQVJlbGF0aW9uc2hpcHNXRU1JLz5cbiAgICAgICAgICAgIFBSRUZJWCBkY3Rlcm1zOiA8aHR0cDovL3B1cmwub3JnL2RjL3Rlcm1zLz5cbiAgICAgICAgICAgIFBSRUZJWCBmb2FmOiA8aHR0cDovL3htbG5zLmNvbS9mb2FmLzAuMS8+XG4gICAgICAgICAgICBQUkVGSVggcmRmOiA8aHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIz5cbiAgICAgICAgICAgIFBSRUZJWCBza29zOiA8aHR0cDovL3d3dy53My5vcmcvMjAwNC8wMi9za29zL2NvcmUjPlxuICAgICAgICAgICAgUFJFRklYIGJuZnJvbGVzOiA8aHR0cDovL2RhdGEuYm5mLmZyL3ZvY2FidWxhcnkvcm9sZXMvPlxuICAgICAgICAgICAgXG4gICAgICAgICAgICBzZWxlY3QgP2lzYm4gP2V4dHJhaXRfbWFuaWZlc3RhdGlvbiA/dGl0cmVfbWFuaWZlc3RhdGlvbnNfYXV0ZXVyID9wdWIgP2RhdGVfbWFuaWZlc3RhdGlvbnNfYXV0ZXVyID9zdWpldF9hdXRldXIgd2hlcmV7XG4gICAgICAgICAgICAgICAgP21hbmlmZXN0YXRpb24gcmRhcmVsYXRpb25zaGlwczpleHByZXNzaW9uTWFuaWZlc3RlZCA/ZXhwcmVzc2lvbi5cbiAgICAgICAgICAgICAgICA/ZXhwcmVzc2lvbiBibmZyb2xlczpyNzAgP2F1dGV1ci5cbiAgICAgICAgICAgICAgICA/ZXhwcmVzc2lvbnNfYXV0ZXVyIGJuZnJvbGVzOnI3MCA/YXV0ZXVyLlxuICAgICAgICAgICAgICAgICNkY3Rlcm1zOmxhbmd1YWdlIDxodHRwOi8vaWQubG9jLmdvdi92b2NhYnVsYXJ5L2lzbzYzOS0yL2ZyZT4uXG4gICAgICAgICAgICAgICAgP21hbmlmZXN0YXRpb25zX2F1dGV1ciByZGFyZWxhdGlvbnNoaXBzOmV4cHJlc3Npb25NYW5pZmVzdGVkID9leHByZXNzaW9uc19hdXRldXI7XG4gICAgICAgICAgICAgICAgICAgIGRjdGVybXM6dGl0bGUgP3RpdHJlX21hbmlmZXN0YXRpb25zX2F1dGV1cjtcbiAgICAgICAgICAgICAgICAgICAgZGN0ZXJtczpkYXRlID9kYXRlX21hbmlmZXN0YXRpb25zX2F1dGV1cjtcbiAgICAgICAgICAgICAgICAgICAgYm5mLW9udG86aXNibiA/aXNibjtcbiAgICAgICAgICAgICAgICAgICAgZGN0ZXJtczpwdWJsaXNoZXIgP3B1Yi5cbiAgICAgICAgICAgICAgICBvcHRpb25hbHtcbiAgICAgICAgICAgICAgICAgICAgP21hbmlmZXN0YXRpb25zX2F1dGV1ciBkY3Rlcm1zOmFic3RyYWN0ID9leHRyYWl0X21hbmlmZXN0YXRpb24uXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG9wdGlvbmFse1xuICAgICAgICAgICAgICAgICAgICA/bWFuaWZlc3RhdGlvbnNfYXV0ZXVyIGRjdGVybXM6c3ViamVjdCA/c3VqZXRfYXV0ZXVyLlxuICAgICAgICAgICAgICAgIH1cbiAgXHRcdFx0XHR7XG4gICAgICAgICAgICAgICAgICAgID9tYW5pZmVzdGF0aW9uIGJuZi1vbnRvOmlzYm4gXCIiLmNvbmNhdChpc2JuLmdldEZvcm1hdGVkSVNCTigpLCAiXCJcbiAgICAgICAgICAgICAgICB9IFVOSU9OIHtcbiAgICAgICAgICAgICAgICAgICAgP21hbmlmZXN0YXRpb24gYm5mLW9udG86aXNibiBcIiIpLmNvbmNhdChpc2JuLmdldEZvcm1hdGVkSVNCTjEwKCksICJcIlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZ3JvdXAgYnkgP3RpdHJlX21hbmlmZXN0YXRpb25zX2F1dGV1clxuICAgICAgICAgICAgbGltaXQgMTAwIikpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdF9jb21wbGVtZW50YWlyZXMpIHsKICAgICAgICAgIF90aGlzMy5maWxsSW5mb3NDb21wbGVtZW50YWlyZXMocmVzdWx0X2NvbXBsZW1lbnRhaXJlcywgaXNibik7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRWYWx1ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VmFsdWUoJG9iamV0LCAkbCkgewogICAgICByZXR1cm4gJG9iamV0WyRsXSA/ICRvYmpldFskbF0udmFsdWUgOiAiIjsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJmaWxsSVNCTjEwIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBmaWxsSVNCTjEwKGlzYm4pIHsKICAgICAgdmFyIGlzYm4gPSB0aGlzLmlzYm4uZ2V0SVNCTjEwKCk7CiAgICAgIHRoaXMucmVzdWx0YXRzLmlzYm4xMCA9IGlzYm47CiAgICB9CiAgfSwgewogICAga2V5OiAiZmlsbEluZm9zIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBmaWxsSW5mb3MocmVzdWx0LCBpc2JuKSB7CiAgICAgIGlmIChyZXN1bHQucmVzdWx0cy5iaW5kaW5ncy5sZW5ndGgpIHsKICAgICAgICB2YXIgcmVzdWx0YXRzID0gcmVzdWx0LnJlc3VsdHMuYmluZGluZ3NbMF07CiAgICAgICAgdGhpcy5yZXN1bHRhdHMudGl0cmVfbWFuaWZlc3RhdGlvbiA9IHRoaXMuZ2V0VmFsdWUocmVzdWx0YXRzLCAndGl0cmVfbWFuaWZlc3RhdGlvbicpOwogICAgICAgIHRoaXMucmVzdWx0YXRzLmRhdGVfbWFuaWZlc3RhdGlvbiA9IHRoaXMuZ2V0VmFsdWUocmVzdWx0YXRzLCAnZGF0ZV9tYW5pZmVzdGF0aW9uJyk7CiAgICAgICAgdGhpcy5yZXN1bHRhdHMubGlldV9wdWJsaWNhdGlvbl9tYW5pZmVzdGF0aW9uID0gdGhpcy5nZXRWYWx1ZShyZXN1bHRhdHMsICdsaWV1X3B1YmxpY2F0aW9uX21hbmlmZXN0YXRpb24nKTsKICAgICAgICB0aGlzLnJlc3VsdGF0cy5sYW5ndWVfZXhwcmVzc2lvbiA9IHRoaXMuZ2V0VmFsdWUocmVzdWx0YXRzLCAnbGFuZ3VlX2V4cHJlc3Npb24nKTsKICAgICAgICB0aGlzLnJlc3VsdGF0cy5kZXNjcmlwdGlvbl9tYW5pZmVzdGF0aW9uID0gdGhpcy5nZXRWYWx1ZShyZXN1bHRhdHMsICdkZXNjcmlwdGlvbl9tYW5pZmVzdGF0aW9uJyk7CiAgICAgICAgdGhpcy5yZXN1bHRhdHMuZWRpdGV1cl9tYW5pZmVzdGF0aW9uID0gdGhpcy5nZXRWYWx1ZShyZXN1bHRhdHMsICdlZGl0ZXVyX21hbmlmZXN0YXRpb24nKTsKICAgICAgICB0aGlzLnJlc3VsdGF0cy5ub21fYXV0ZXVyID0gdGhpcy5nZXRWYWx1ZShyZXN1bHRhdHMsICdub21fYXV0ZXVyJyk7CiAgICAgICAgdGhpcy5yZXN1bHRhdHMuc3VqZXRfb2V1dnJlID0gdGhpcy5nZXRWYWx1ZShyZXN1bHRhdHMsICdzdWpldF9vZXV2cmUnKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImZpbGxJbmZvc0F1dGV1ciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZmlsbEluZm9zQXV0ZXVyKHJlc3VsdF9hdXRldXIsIGlzYm4pIHsKICAgICAgaWYgKHJlc3VsdF9hdXRldXIucmVzdWx0cy5iaW5kaW5ncy5sZW5ndGgpIHsKICAgICAgICB2YXIgcmVzdWx0YXRzID0gcmVzdWx0X2F1dGV1ci5yZXN1bHRzLmJpbmRpbmdzWzBdOwogICAgICAgIHRoaXMucmVzdWx0YXRzLmF1dGV1ci5wYXlzX2F1dGV1ciA9IHRoaXMuZ2V0VmFsdWUocmVzdWx0YXRzLCAncGF5c19hdXRldXInKTsKICAgICAgICB0aGlzLnJlc3VsdGF0cy5hdXRldXIuaW1hZ2VfYXV0ZXVyID0gdGhpcy5nZXRWYWx1ZShyZXN1bHRhdHMsICJpbWFnZV9hdXRldXIiKTsKICAgICAgICB0aGlzLnJlc3VsdGF0cy5hdXRldXIuaW5mb3JtYXRpb25zX2F1dGV1ciA9IHRoaXMuZ2V0VmFsdWUocmVzdWx0YXRzLCAnaW5mb3JtYXRpb25zX2F1dGV1cicpOwogICAgICAgIHRoaXMucmVzdWx0YXRzLmF1dGV1ci5wYWdlX2F1dGV1ciA9IHRoaXMuZ2V0VmFsdWUocmVzdWx0YXRzLCAncGFnZV9hdXRldXInKTsKICAgICAgICB0aGlzLnJlc3VsdGF0cy5hdXRldXIuZGF0ZV9uYWlzc2FuY2VfYXV0ZXVyID0gdGhpcy5nZXRWYWx1ZShyZXN1bHRhdHMsICdkYXRlX25haXNzYW5jZV9hdXRldXInKTsKICAgICAgICB0aGlzLnJlc3VsdGF0cy5hdXRldXIubGlldV9uYWlzc2FuY2VfYXV0ZXVyID0gdGhpcy5nZXRWYWx1ZShyZXN1bHRhdHMsICdsaWV1X25haXNzYW5jZV9hdXRldXInKTsKICAgICAgICB0aGlzLnJlc3VsdGF0cy5hdXRldXIuZGF0ZV9tb3J0X2F1dGV1ciA9IHRoaXMuZ2V0VmFsdWUocmVzdWx0YXRzLCAnZGF0ZV9tb3J0X2F1dGV1cicpOwogICAgICAgIHRoaXMucmVzdWx0YXRzLmF1dGV1ci5saWV1X21vcnRfYXV0ZXVyID0gdGhpcy5nZXRWYWx1ZShyZXN1bHRhdHMsICdsaWV1X21vcnRfYXV0ZXVyJyk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJmaWxsSW5mb3NDb21wbGVtZW50YWlyZXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZpbGxJbmZvc0NvbXBsZW1lbnRhaXJlcyhyZXN1bHRfY29tcGxlbWVudGFpcmVzLCBpc2JuKSB7CiAgICAgIGlmIChyZXN1bHRfY29tcGxlbWVudGFpcmVzLnJlc3VsdHMuYmluZGluZ3MubGVuZ3RoKSB7CiAgICAgICAgdGhpcy5yZXN1bHRhdHMuZG9ubmVlc19jb21wbGVtZW50YWlyZXMgPSBbXTsKICAgICAgICB2YXIgcmVzdWx0YXRzID0gcmVzdWx0X2NvbXBsZW1lbnRhaXJlcy5yZXN1bHRzLmJpbmRpbmdzOwoKICAgICAgICBmb3IgKHZhciBpIGluIHJlc3VsdGF0cykgewogICAgICAgICAgdmFyIGRvbm5lZXMgPSB7CiAgICAgICAgICAgIGlzYm46IHRoaXMuZ2V0VmFsdWUocmVzdWx0YXRzW2ldLCAiaXNibiIpLAogICAgICAgICAgICBleHRyYWl0X21hbmlmZXN0YXRpb246IHRoaXMuZ2V0VmFsdWUocmVzdWx0YXRzW2ldLCAiZXh0cmFpdF9tYW5pZmVzdGF0aW9uIiksCiAgICAgICAgICAgIHRpdHJlX21hbmlmZXN0YXRpb25zX2F1dGV1cjogdGhpcy5nZXRWYWx1ZShyZXN1bHRhdHNbaV0sICd0aXRyZV9tYW5pZmVzdGF0aW9uc19hdXRldXInKSwKICAgICAgICAgICAgcHViOiB0aGlzLmdldFZhbHVlKHJlc3VsdGF0c1tpXSwgJ3B1Yi52YWx1ZScpLAogICAgICAgICAgICBkYXRlX21hbmlmZXN0YXRpb25zX2F1dGV1cjogdGhpcy5nZXRWYWx1ZShyZXN1bHRhdHNbaV0sICdkYXRlX21hbmlmZXN0YXRpb25zX2F1dGV1cicpLAogICAgICAgICAgICBzdWpldF9hdXRldXI6IHRoaXMuZ2V0VmFsdWUocmVzdWx0YXRzW2ldLCAnc3VqZXRfYXV0ZXVyJykKICAgICAgICAgIH07CiAgICAgICAgICB0aGlzLnJlc3VsdGF0cy5kb25uZWVzX2NvbXBsZW1lbnRhaXJlcy5wdXNoKGRvbm5lZXMpOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH1dKTsKCiAgcmV0dXJuIHJlY3VwZXJhdGlvbkRvbm5lZXM7Cn0oKTsKCmV4cG9ydCB7IHJlY3VwZXJhdGlvbkRvbm5lZXMgYXMgZGVmYXVsdCB9Ow=="},{"version":3,"sources":["C:/Users/CAMILLE/Downloads/Tetard_App_ISBN/BNF-Scan/src/classes/recuperationDonnees.js"],"names":["Sparql","Isbn","recuperationDonnees","resultats","isbn","ean","requete_donnees_de_base","requete_donnees_auteur","requete_donnes_complementaires","fillISBN10","console","log","getFormatedISBN","getFormatedISBN10","sparql","query","then","result","fillInfos","catch","error","result_auteur","fillInfosAuteur","result_complementaires","fillInfosComplementaires","$objet","$l","value","getISBN10","isbn10","results","bindings","length","titre_manifestation","getValue","date_manifestation","lieu_publication_manifestation","langue_expression","description_manifestation","editeur_manifestation","nom_auteur","sujet_oeuvre","auteur","pays_auteur","image_auteur","informations_auteur","page_auteur","date_naissance_auteur","lieu_naissance_auteur","date_mort_auteur","lieu_mort_auteur","donnees_complementaires","i","donnees","extrait_manifestation","titre_manifestations_auteur","pub","date_manifestations_auteur","sujet_auteur","push"],"mappings":"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","sourcesContent":["import Sparql from './sparql.js';\nimport Isbn from './Isbn.js';\n\nexport default class recuperationDonnees{\n    constructor(resultats){\n        this.resultats = resultats;\n        this.isbn = new Isbn(resultats.ean);\n        this.requete_donnees_de_base(this.isbn);\n        this.requete_donnees_auteur(this.isbn);\n        this.requete_donnes_complementaires(this.isbn);\n        this.fillISBN10(this.isbn)\n    }\n    requete_donnees_de_base(isbn){\n        {\n            console.log(isbn.getFormatedISBN())\n            console.log(isbn.getFormatedISBN10())\n            var sparql= new Sparql('https://data.bnf.fr/sparql');\n            sparql.query(`PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\n            PREFIX frbr-rda: <http://rdvocab.info/uri/schema/FRBRentitiesRDA/>\n            PREFIX bnf-onto: <http://data.bnf.fr/ontology/bnf-onto/>\n            PREFIX dcterms: <http://purl.org/dc/terms/>\n            PREFIX rdarelationships: <http://rdvocab.info/RDARelationshipsWEMI/>\n            PREFIX foaf: <http://xmlns.com/foaf/0.1/>\n            PREFIX rdagroup1elements: <http://rdvocab.info/Elements/>\n            Select ?titre_manifestation ?date_manifestation ?lieu_publication_manifestation ?langue_expression ?description_manifestation ?editeur_manifestation ?nom_auteur ?sujet_oeuvre where {\n                ?manif dcterms:title ?titre_manifestation;\n                    dcterms:date ?date_manifestation;\n                    dcterms:description ?description_manifestation;\n                    dcterms:publisher ?editeur_manifestation;\n                    rdagroup1elements:placeOfPublication ?lieu_publication_manifestation;\n                    rdarelationships:expressionManifested ?expression.\n                ?expression <http://data.bnf.fr/vocabulary/roles/r70> ?auteur.\n                optional{\n                    ?expression dcterms:language ?langue_expression.\n                }\n                optional{\n                    ?oeuvre rdarelationships:expressionOfWork ?expression;\n                        bnf-onto:subject ?sujet_oeuvre.\n                }\n                ?auteur foaf:name ?nom_auteur.\n                {\n                    ?manif bnf-onto:isbn \"${isbn.getFormatedISBN()}\"\n                } UNION {\n                    ?manif bnf-onto:isbn \"${isbn.getFormatedISBN10()}\"\n                }\n                }`).then(result=>{\n                    this.fillInfos(result,isbn);\n                }).catch(error=>{\n                    console.log(error);\n                });\n        }\n    }\n    requete_donnees_auteur(isbn){\n        {\n            var sparql= new Sparql('https://data.bnf.fr/sparql');\n            sparql.query(`PREFIX bnf-onto: <http://data.bnf.fr/ontology/bnf-onto/>\n            PREFIX rdarelationships: <http://rdvocab.info/RDARelationshipsWEMI/>\n            PREFIX foaf: <http://xmlns.com/foaf/0.1/>\n            PREFIX rdagroup2elements: <http://rdvocab.info/ElementsGr2/>\n            PREFIX dcterms: <http://purl.org/dc/terms/>\n\t\t\tPREFIX bnfroles: <http://data.bnf.fr/vocabulary/roles/>\n\n            select ?nom_auteur ?pays_auteur ?image_auteur ?informations_auteur ?page_auteur ?date_naissance_auteur ?lieu_naissance_auteur ?date_mort_auteur ?lieu_mort_auteur where{\n                ?manifestation rdarelationships:expressionManifested ?expression.\n                ?expression bnfroles:r70 ?auteur.\n                ?auteur foaf:name ?nom_auteur.\n  \t\t\t\toptional{\n    \t\t\t\t?auteur foaf:page ?page_auteur.\n  \t\t\t\t}\n                optional{\n                    ?auteur bnf-onto:firstYear ?date_naissance_auteur.\n                    optional{\n                        ?auteur bnf-onto:lastYear ?date_mort_auteur.\n                    }\n                }\n                optional{\n                    ?auteur rdagroup2elements:placeOfBirth ?lieu_naissance_auteur.\n                    optional{\n                        ?auteur rdagroup2elements:placeOfDeath ?lieu_mort_auteur.\n                    }\n                }\n                optional{\n                    ?auteur rdagroup2elements:countryAssociatedWithThePerson ?pays_auteur.\n                }\n                optional{\n                    ?auteur foaf:depiction ?image_auteur.\n                    filter(regex(?image_auteur, \"http://commons.wikimedia.org/wiki/Special:FilePath/\"))\n                }\n                optional{\n                    ?auteur rdagroup2elements:biographicalInformation ?informations_auteur.\n                }\n  \t\t\t\t {\n                    ?manifestation bnf-onto:isbn \"${isbn.getFormatedISBN()}\"\n                } UNION {\n                    ?manifestation bnf-onto:isbn \"${isbn.getFormatedISBN10()}\"\n                }\n            }\n            limit 1`).then(result_auteur=>{\n                this.fillInfosAuteur(result_auteur,isbn);\n            }).catch(error=>{\n                console.log(error);\n            });\n        }\n\n    }\n    requete_donnes_complementaires(isbn){\n        {\n            var sparql= new Sparql('https://data.bnf.fr/sparql');\n            sparql.query(`PREFIX bnf-onto: <http://data.bnf.fr/ontology/bnf-onto/>\n            PREFIX rdarelationships: <http://rdvocab.info/RDARelationshipsWEMI/>\n            PREFIX dcterms: <http://purl.org/dc/terms/>\n            PREFIX foaf: <http://xmlns.com/foaf/0.1/>\n            PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\n            PREFIX skos: <http://www.w3.org/2004/02/skos/core#>\n            PREFIX bnfroles: <http://data.bnf.fr/vocabulary/roles/>\n            \n            select ?isbn ?extrait_manifestation ?titre_manifestations_auteur ?pub ?date_manifestations_auteur ?sujet_auteur where{\n                ?manifestation rdarelationships:expressionManifested ?expression.\n                ?expression bnfroles:r70 ?auteur.\n                ?expressions_auteur bnfroles:r70 ?auteur.\n                #dcterms:language <http://id.loc.gov/vocabulary/iso639-2/fre>.\n                ?manifestations_auteur rdarelationships:expressionManifested ?expressions_auteur;\n                    dcterms:title ?titre_manifestations_auteur;\n                    dcterms:date ?date_manifestations_auteur;\n                    bnf-onto:isbn ?isbn;\n                    dcterms:publisher ?pub.\n                optional{\n                    ?manifestations_auteur dcterms:abstract ?extrait_manifestation.\n                }\n                optional{\n                    ?manifestations_auteur dcterms:subject ?sujet_auteur.\n                }\n  \t\t\t\t{\n                    ?manifestation bnf-onto:isbn \"${isbn.getFormatedISBN()}\"\n                } UNION {\n                    ?manifestation bnf-onto:isbn \"${isbn.getFormatedISBN10()}\"\n                }\n            }\n            \n            group by ?titre_manifestations_auteur\n            limit 100`).then(result_complementaires=>{\n                this.fillInfosComplementaires(result_complementaires,isbn);\n            }).catch(error=>{\n                console.log(error);\n            });\n        }\n    }\n    getValue($objet,$l) {\n        return ($objet[$l]?$objet[$l].value:\"\");\n    }\n\n    fillISBN10(isbn){\n        var isbn = this.isbn.getISBN10();\n        this.resultats.isbn10 = isbn;\n    }\n\n    fillInfos(result,isbn){\n        if(result.results.bindings.length){\n            let resultats=result.results.bindings[0];\n            this.resultats.titre_manifestation = this.getValue(resultats, 'titre_manifestation');\n            this.resultats.date_manifestation = this.getValue(resultats, 'date_manifestation');\n            this.resultats.lieu_publication_manifestation = this.getValue(resultats, 'lieu_publication_manifestation');\n            this.resultats.langue_expression = this.getValue(resultats, 'langue_expression');\n            this.resultats.description_manifestation = this.getValue(resultats, 'description_manifestation');\n            this.resultats.editeur_manifestation = this.getValue(resultats,'editeur_manifestation');\n            this.resultats.nom_auteur = this.getValue(resultats, 'nom_auteur');\n            this.resultats.sujet_oeuvre = this.getValue(resultats, 'sujet_oeuvre')\n        }\n    }\n    fillInfosAuteur(result_auteur,isbn){\n        if(result_auteur.results.bindings.length){\n            let resultats = result_auteur.results.bindings[0];\n            this.resultats.auteur.pays_auteur = this.getValue(resultats, 'pays_auteur');\n            this.resultats.auteur.image_auteur = this.getValue(resultats,\"image_auteur\");\n            this.resultats.auteur.informations_auteur = this.getValue(resultats, 'informations_auteur');\n            this.resultats.auteur.page_auteur = this.getValue(resultats, 'page_auteur');\n            this.resultats.auteur.date_naissance_auteur = this.getValue(resultats, 'date_naissance_auteur');\n            this.resultats.auteur.lieu_naissance_auteur = this.getValue(resultats, 'lieu_naissance_auteur');\n            this.resultats.auteur.date_mort_auteur = this.getValue(resultats, 'date_mort_auteur');\n            this.resultats.auteur.lieu_mort_auteur = this.getValue(resultats, 'lieu_mort_auteur')\n        }\n    }\n    fillInfosComplementaires(result_complementaires, isbn){\n        if(result_complementaires.results.bindings.length){ \n            this.resultats.donnees_complementaires=[];\n            let resultats = result_complementaires.results.bindings;\n            for (let i in resultats){\n                let donnees={\n                    isbn:this.getValue(resultats[i],\"isbn\"),\n                    extrait_manifestation:this.getValue(resultats[i], \"extrait_manifestation\"),\n                    titre_manifestations_auteur:this.getValue(resultats[i],'titre_manifestations_auteur'),\n                    pub:this.getValue(resultats[i],'pub.value'),\n                    date_manifestations_auteur:this.getValue(resultats[i],'date_manifestations_auteur'),\n                    sujet_auteur:this.getValue(resultats[i],'sujet_auteur')\n                };\n                this.resultats.donnees_complementaires.push(donnees);\n            }\n            \n        }\n    }\n}"]}]}