{"remainingRequest":"C:\\Users\\CAMILLE\\Desktop\\groupe3\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\CAMILLE\\Desktop\\groupe3\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\CAMILLE\\Desktop\\groupe3\\src\\classes\\sparql.js","dependencies":[{"path":"C:\\Users\\CAMILLE\\Desktop\\groupe3\\src\\classes\\sparql.js","mtime":1578904058991},{"path":"C:\\Users\\CAMILLE\\Desktop\\groupe3\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\CAMILLE\\Desktop\\groupe3\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\CAMILLE\\Desktop\\groupe3\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiQzpcXFVzZXJzXFxDQU1JTExFXFxEZXNrdG9wXFxncm91cGUzXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZS1jb3JlanMzL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICJDOlxcVXNlcnNcXENBTUlMTEVcXERlc2t0b3BcXGdyb3VwZTNcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lLWNvcmVqczMvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwoKdmFyIFNwYXJxbCA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIFNwYXJxbChlbmRwb2ludCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFNwYXJxbCk7CgogICAgdGhpcy5lbmRwb2ludCA9IGVuZHBvaW50OwogIH0KCiAgX2NyZWF0ZUNsYXNzKFNwYXJxbCwgW3sKICAgIGtleTogInF1ZXJ5IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBxdWVyeShfcXVlcnkpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBxdWVyeVByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgdmFyIGh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKCiAgICAgICAgaHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgaWYgKGh0dHAucmVhZHlTdGF0ZSA9PT0gWE1MSHR0cFJlcXVlc3QuRE9ORSkgewogICAgICAgICAgICBpZiAoaHR0cC5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgICAgIHZhciByZXNwb25zZSA9IGh0dHAucmVzcG9uc2VUZXh0OwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHZhciByZXNwb25zZSA9IGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgdmFyIHJlc3BvbnNlID0gbnVsbDsKCiAgICAgICAgICBpZiAocmVzcG9uc2UgPT09IGZhbHNlKSByZWplY3QoaHR0cC5zdGF0dXMpO2Vsc2UgaWYgKHJlc3BvbnNlICE9PSBudWxsKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgdmFyIGpzb25SZXNwb25zZSA9IEpTT04ucGFyc2UocmVzcG9uc2UpOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgcmVqZWN0KCJDYW4ndCBwYXJzZSByZXNwb25zZSAhIik7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJlc29sdmUoanNvblJlc3BvbnNlKTsKICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBodHRwLm9wZW4oJ1BPU1QnLCBfdGhpcy5lbmRwb2ludCk7CiAgICAgICAgaHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LVR5cGUiLCAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIik7CiAgICAgICAgaHR0cC5zZW5kKCJxdWVyeT0iICsgZW5jb2RlVVJJQ29tcG9uZW50KF9xdWVyeSkgKyAiJmZvcm1hdD0iICsgZW5jb2RlVVJJQ29tcG9uZW50KCJhcHBsaWNhdGlvbi9zcGFycWwtcmVzdWx0cytqc29uIikpOwogICAgICB9KTsKICAgICAgcmV0dXJuIHF1ZXJ5UHJvbWlzZTsKICAgIH0KICB9XSk7CgogIHJldHVybiBTcGFycWw7Cn0oKTsKCmV4cG9ydCB7IFNwYXJxbCBhcyBkZWZhdWx0IH07"},{"version":3,"sources":["C:/Users/CAMILLE/Desktop/groupe3/src/classes/sparql.js"],"names":["Sparql","endpoint","query","queryPromise","Promise","resolve","reject","http","XMLHttpRequest","onreadystatechange","e","readyState","DONE","status","response","responseText","jsonResponse","JSON","parse","open","setRequestHeader","send","encodeURIComponent"],"mappings":";;;;IAAqBA,M;;;AACjB,kBAAYC,QAAZ,EAAsB;AAAA;;AACd,SAAKA,QAAL,GAAcA,QAAd;AACP;;;;0BAEKC,M,EAAO;AAAA;;AAET,UAAIC,YAAY,GAAC,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAASC,MAAT,EAAkB;AAEvC,YAAIC,IAAI,GAAC,IAAIC,cAAJ,EAAT;;AAEAD,QAAAA,IAAI,CAACE,kBAAL,GAAwB,UAACC,CAAD,EAAK;AAEzB,cAAIH,IAAI,CAACI,UAAL,KAAoBH,cAAc,CAACI,IAAvC,EAA6C;AAEzC,gBAAIL,IAAI,CAACM,MAAL,KAAgB,GAApB,EAAyB;AAErB,kBAAIC,QAAQ,GAACP,IAAI,CAACQ,YAAlB;AACH,aAHD,MAGO;AAEH,kBAAID,QAAQ,GAAC,KAAb;AACH;AAEJ,WAVD,MAUO,IAAIA,QAAQ,GAAC,IAAb;;AAEP,cAAIA,QAAQ,KAAG,KAAf,EAAsBR,MAAM,CAACC,IAAI,CAACM,MAAN,CAAN,CAAtB,KAEK,IAAIC,QAAQ,KAAG,IAAf,EAAqB;AACtB,gBAAI;AAEA,kBAAIE,YAAY,GAACC,IAAI,CAACC,KAAL,CAAWJ,QAAX,CAAjB;AACH,aAHD,CAGE,OAAMJ,CAAN,EAAS;AAEPJ,cAAAA,MAAM,CAAC,wBAAD,CAAN;AACH;;AAEDD,YAAAA,OAAO,CAACW,YAAD,CAAP;AACH;AACJ,SA3BD;;AA6BAT,QAAAA,IAAI,CAACY,IAAL,CAAU,MAAV,EAAiB,KAAI,CAAClB,QAAtB;AAEAM,QAAAA,IAAI,CAACa,gBAAL,CAAsB,cAAtB,EAAsC,mCAAtC;AAEAb,QAAAA,IAAI,CAACc,IAAL,CAAU,WAASC,kBAAkB,CAACpB,MAAD,CAA3B,GAAmC,UAAnC,GAA8CoB,kBAAkB,CAAC,iCAAD,CAA1E;AACH,OAtCY,CAAjB;AAwCA,aAAOnB,YAAP;AACH;;;;;;SAhDgBH,M","sourcesContent":["export default class Sparql {\n    constructor(endpoint) {\n            this.endpoint=endpoint;\n    }\n    \n    query(query) {\n\n        let queryPromise=new Promise((resolve,reject)=>{\n  \n                let http=new XMLHttpRequest();\n   \n                http.onreadystatechange=(e)=>{\n       \n                    if (http.readyState === XMLHttpRequest.DONE) {\n                \n                        if (http.status === 200) {\n                \n                            var response=http.responseText;\n                        } else {\n             \n                            var response=false;\n                        }\n           \n                    } else var response=null;\n \n                    if (response===false) reject(http.status);\n     \n                    else if (response!==null) {\n                        try {\n              \n                            var jsonResponse=JSON.parse(response);\n                        } catch(e) {\n                   \n                            reject(\"Can't parse response !\");\n                        }\n         \n                        resolve(jsonResponse);\n                    }\n                }\n             \n                http.open('POST',this.endpoint);\n   \n                http.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded\");\n    \n                http.send(\"query=\"+encodeURIComponent(query)+\"&format=\"+encodeURIComponent(\"application/sparql-results+json\"));\n            });\n  \n        return queryPromise;\n    }\n}\n\n"]}]}